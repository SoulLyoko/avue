var V=Object.defineProperty;var h=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable;var f=(o,e,r)=>e in o?V(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r,_=(o,e)=>{for(var r in e||(e={}))x.call(e,r)&&f(o,r,e[r]);if(h)for(var r of h(e))b.call(e,r)&&f(o,r,e[r]);return o};import{m as k,s as w,_ as L,r as m,o as c,j as K,u as n,i,q as g,d,c as y,g as C,l as T,h as q}from"./index.20fd9f9c.js";const B={name:"userlogin",data(){return{loginForm:{username:"admin",password:"123456",code:"",redomStr:""},checked:!1,code:{src:"",value:"",len:4,type:"text"},loginRules:{username:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"},{min:6,message:"\u5BC6\u7801\u957F\u5EA6\u6700\u5C11\u4E3A6\u4F4D",trigger:"blur"}],code:[{required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801",trigger:"blur"},{min:4,max:4,message:"\u9A8C\u8BC1\u7801\u957F\u5EA6\u4E3A4\u4F4D",trigger:"blur"},{required:!0,trigger:"blur",validator:(e,r,u)=>{this.code.value!=r?(this.loginForm.code="",this.refreshCode(),u(new Error("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u9A8C\u8BC1\u7801"))):u()}}]},passwordType:"password"}},created(){this.refreshCode()},mounted(){},computed:_({},k(["tagWel"])),props:[],methods:{refreshCode(){this.loginForm.redomStr=w(this.code.len,!0),this.code.type=="text"?this.code.value=w(this.code.len):this.code.src=`/${this.loginForm.redomStr}`,this.loginForm.code=this.code.value},showPassword(){this.passwordType==""?this.passwordType="password":this.passwordType=""},handleLogin(){this.$refs.loginForm.validate(o=>{o&&this.$store.dispatch("LoginByUsername",this.loginForm).then(()=>{this.$router.push(this.tagWel)})})}}},N=d("i",{class:"icon-yonghu"},null,-1),S=d("i",{class:"icon-mima"},null,-1),U=d("i",{class:"icon-yanzhengma"},null,-1),P={class:"login-code"},E=["src"];function R(o,e,r,u,s,t){const p=m("el-input"),a=m("el-form-item"),F=m("el-button"),v=m("el-form");return c(),K(v,{class:"login-form","status-icon":"",rules:s.loginRules,ref:"loginForm",model:s.loginForm,"label-width":"0"},{default:n(()=>[i(a,{prop:"username"},{default:n(()=>[i(p,{onKeyup:g(t.handleLogin,["enter"]),modelValue:s.loginForm.username,"onUpdate:modelValue":e[0]||(e[0]=l=>s.loginForm.username=l),"auto-complete":"off",placeholder:o.$t("login.username")},{prefix:n(()=>[N]),_:1},8,["onKeyup","modelValue","placeholder"])]),_:1}),i(a,{prop:"password"},{default:n(()=>[i(p,{onKeyup:g(t.handleLogin,["enter"]),type:s.passwordType,modelValue:s.loginForm.password,"onUpdate:modelValue":e[2]||(e[2]=l=>s.loginForm.password=l),"auto-complete":"off",placeholder:o.$t("login.password")},{suffix:n(()=>[d("i",{class:"el-icon-view el-input__icon",onClick:e[1]||(e[1]=(...l)=>t.showPassword&&t.showPassword(...l))})]),prefix:n(()=>[S]),_:1},8,["onKeyup","type","modelValue","placeholder"])]),_:1}),i(a,{prop:"code"},{default:n(()=>[i(p,{onKeyup:g(t.handleLogin,["enter"]),maxlength:s.code.len,modelValue:s.loginForm.code,"onUpdate:modelValue":e[5]||(e[5]=l=>s.loginForm.code=l),"auto-complete":"off",placeholder:o.$t("login.code")},{prefix:n(()=>[U]),append:n(()=>[d("div",P,[s.code.type=="text"?(c(),y("span",{key:0,class:"login-code-img",onClick:e[3]||(e[3]=(...l)=>t.refreshCode&&t.refreshCode(...l))},C(s.code.value),1)):(c(),y("img",{key:1,src:s.code.src,class:"login-code-img",onClick:e[4]||(e[4]=(...l)=>t.refreshCode&&t.refreshCode(...l))},null,8,E))])]),_:1},8,["onKeyup","maxlength","modelValue","placeholder"])]),_:1}),i(a,null,{default:n(()=>[i(F,{type:"primary",onClick:T(t.handleLogin,["prevent"]),class:"login-submit"},{default:n(()=>[q(C(o.$t("login.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["rules","model"])}var z=L(B,[["render",R]]);export{z as default};
