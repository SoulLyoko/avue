var v=Object.defineProperty,x=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var u=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var p=(o,e,s)=>e in o?v(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,c=(o,e)=>{for(var s in e||(e={}))I.call(e,s)&&p(o,s,e[s]);if(u)for(var s of u(e))G.call(e,s)&&p(o,s,e[s]);return o},f=(o,e)=>x(o,M(e));import{m as K,_ as F,x as _,r as a,o as V,j as E,u as i,i as n,q as S,d,g as T,n as b,l as w,h as L}from"./index.20fd9f9c.js";const N={name:"codelogin",data(){return{msgText:"",msgTime:"",msgKey:!1,loginForm:{phone:"",code:""},loginRules:{phone:[{required:!0,trigger:"blur",validator:(s,l,t)=>{_(l)[0]?t(new Error(_(l)[1])):t()}}],code:[{required:!0,trigger:"blur",validator:(s,l,t)=>{l.length!=4?t(new Error("\u8BF7\u8F93\u51654\u4F4D\u6570\u7684\u9A8C\u8BC1\u7801")):t()}}]}}},created(){this.msgText=this.config.MSGINIT,this.msgTime=this.config.MSGTIME},mounted(){},computed:f(c({},K(["tagWel"])),{config(){return{MSGINIT:this.$t("login.msgText"),MSGSCUCCESS:this.$t("login.msgSuccess"),MSGTIME:60}}}),props:[],methods:{handleSend(){if(this.msgKey)return;this.msgText=this.msgTime+this.config.MSGSCUCCESS,this.msgKey=!0;const o=setInterval(()=>{this.msgTime--,this.msgText=this.msgTime+this.config.MSGSCUCCESS,this.msgTime==0&&(this.msgTime=this.config.MSGTIME,this.msgText=this.config.MSGINIT,this.msgKey=!1,clearInterval(o))},1e3)},handleLogin(){this.$refs.loginForm.validate(o=>{o&&this.$store.dispatch("LoginByPhone",this.loginForm).then(()=>{this.$router.push(this.tagWel)})})}}},U=d("i",{class:"icon-shouji"},null,-1),B=d("i",{class:"icon-yanzhengma"},null,-1);function k(o,e,s,l,t,r){const h=a("el-input"),g=a("el-form-item"),y=a("el-button"),C=a("el-form");return V(),E(C,{class:"login-form","status-icon":"",rules:t.loginRules,ref:"loginForm",model:t.loginForm,"label-width":"0"},{default:i(()=>[n(g,{prop:"phone"},{default:i(()=>[n(h,{onKeyup:S(r.handleLogin,["enter"]),modelValue:t.loginForm.phone,"onUpdate:modelValue":e[0]||(e[0]=m=>t.loginForm.phone=m),"auto-complete":"off",placeholder:o.$t("login.phone")},{prefix:i(()=>[U]),_:1},8,["onKeyup","modelValue","placeholder"])]),_:1}),n(g,{prop:"code"},{default:i(()=>[n(h,{onKeyup:S(r.handleLogin,["enter"]),modelValue:t.loginForm.code,"onUpdate:modelValue":e[2]||(e[2]=m=>t.loginForm.code=m),"auto-complete":"off",placeholder:o.$t("login.code")},{prefix:i(()=>[B]),append:i(()=>[d("span",{onClick:e[1]||(e[1]=(...m)=>r.handleSend&&r.handleSend(...m)),class:b(["msg-text",[{display:t.msgKey}]])},T(t.msgText),3)]),_:1},8,["onKeyup","modelValue","placeholder"])]),_:1}),n(g,null,{default:i(()=>[n(y,{type:"primary",onClick:w(r.handleLogin,["prevent"]),class:"login-submit"},{default:i(()=>[L(T(o.$t("login.submit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["rules","model"])}var j=F(N,[["render",k]]);export{j as default};
